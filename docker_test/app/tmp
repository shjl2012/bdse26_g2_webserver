<!-- 長條圖：周邊設施數量統計 -->
<div class="chart">
    <div class="chart-container">
        <canvas id="barChart"></canvas>
        <script>
            // 交通運輸設施：tsp_count['total']
            // 醫療設施：mdc_count['total']
            // 超商：eco_count['conveniencestores']
            // 學校：edu_count['schools'] + edu_count['universities']
            // 宮廟：sft_count['placeofworkships']
            // 公園：env_count['parks']
            eco_count = {{ eco_count | tojson }}
            tsp_count = {{ tsp_count | tojson }}
            mdc_count = {{ mdc_count | tojson }}
            eco_count = {{ eco_count | tojson }}
            edu_count = {{ edu_count | tojson }}
            sft_count = {{ sft_count | tojson }}
            env_count = {{ env_count | tojson }}

            const bar_labels = [
                '捷運出入口',
                '醫院',
                '超商',
                '學校',
                '宮廟',
                '公園',
            ];

            const bar_data = {
                labels: bar_labels,
                datasets: [{
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(255, 159, 64, 0.2)',
                        'rgba(255, 205, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                    ],
                    borderColor: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                    ],
                    borderWidth: 3,
                    data: [
                        tsp_count['MRTs'],
                        mdc_count['hospitals'],
                        eco_count['conveniencestores'],
                        edu_count['schools'],
                        sft_count['placeofworkships'],
                        env_count['parks']
                    ],
                }]
            };

            const bar_config = {
                type: 'bar',
                data: bar_data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false,
                            position: 'top',
                        },
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: '周邊設施',
                                color: '#003D79',
                                font: {
                                    size: titleFontSize,
                                    weight: 'bold',
                                },
                            }
                        },
                        y: {
                            display: true,
                            title: {
                                display: true,
                                text: '數量',
                                color: '#003D79',
                                font: {
                                    size: titleFontSize,
                                    weight: 'bold',
                                },
                            }
                        }
                    }
                },
            };
        </script>
        <script>
            const barChart = new Chart(
                document.getElementById('barChart'),
                bar_config
            );
        </script>
    </div>
    <div class="chartText">
        <!-- <h2>長條圖：周邊設施數量統計</h2>
        <ul>
            <li>綜合收集影響房屋本身以及周邊環境資料，運用環域分析 (GIS) 以及機器學習手法綜合推估房價。</li>
            <li>綜合收集影響房屋本身以及周邊環境資料，運用環域分析 (GIS) 以及機器學習手法綜合推估房價。</li>
        </ul> -->
    </div>
</div>
<hr>

<!-- 折線圖：歷史成交價格 -->
<div class="chart">
    <div class="chart-container">
        <canvas id="line_history_Chart"></canvas>
        <script>
            // 估價行政區歷史成交價格
            history_price = {{ history_price | tojson }};

            const line_history_labels = ['101年', '102年', '103年', '104年', '105年', '106年', '107年', '108年', '109年', '110年',];

            const line_history_data = {
                labels: line_history_labels,
                datasets: [{
                    label: '行政區歷史成交價格',
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: history_price,
                    tension: 0.1
                }]
            };

            const line_history_config = {
                type: 'line',
                data: line_history_data,
                options: {
                    elements: {
                        line: {
                            borderWidth: 5
                        }
                    },
                    plugins: {
                        legend: {
                            display: false,
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: '行政區歷史成交價格',
                            padding: {
                                top: 10,
                                bottom: 30
                            }
                        },

                    }
                }
            };


        </script>
        <script>
            const line_history_Chart = new Chart(
                document.getElementById('line_history_Chart'),
                line_history_config
            );
        </script>

    </div>
    <div class="chartText">
        <h2>折線圖：歷史成交價格</h2>
        <ul>
            <li>綜合收集影響房屋本身以及周邊環境資料，運用環域分析 (GIS) 以及機器學習手法綜合推估房價。</li>
            <li>用地圖介面提供房屋周遭環境資訊，例如交通、醫療設施，以及商業設施，讓使用者能夠更直覺的評估房屋地點周遭環境。</li>
        </ul>
    </div>
</div>
<hr>

<!-- 雷達圖：區域指標 -->
<div class="chart2">
    <div class="chart-container">
        <canvas id="radarChart" width="400" height="400"></canvas>
        <script>
            house_six_ind = {{ house_six_ind | tojson }};
            dist_six_ind = {{ dist_six_ind | tojson }};
            const radar_labels = [
                '醫療設施',
                '經濟指標',
                '教育資源',
                '公共安全',
                '自然環境',
                '交通運輸',
            ];
            const radar_data = {
                labels: radar_labels,
                datasets: [{
                    label: '輸入地址綜和指標',
                    data: house_six_ind,
                    fill: true,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgb(255, 99, 132)',
                    pointBackgroundColor: 'rgb(255, 99, 132)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(255, 99, 132)'
                }, {
                    label: '行政區綜合指標',
                    data: dist_six_ind,
                    fill: true,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgb(54, 162, 235)',
                    pointBackgroundColor: 'rgb(54, 162, 235)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(54, 162, 235)'
                }]
            };

            const radar_config = {
                type: 'radar',
                data: radar_data,
                options: {
                    elements: {
                        line: {
                            borderWidth: 3
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: '區域指標雷達圖',
                            padding: {
                                top: 10,
                                bottom: 30
                            }
                        }
                    }
                },
            };

        </script>
        <script>
            const radarChart = new Chart(
                document.getElementById('radarChart'),
                radar_config
            );
        </script>

    </div>
    <div class="chartText">
        <h2>雷達圖：區域指標</h2>
        <ul>
            <li>綜合收集影響房屋本身以及周邊環境資料，運用環域分析 (GIS) 以及機器學習手法綜合推估房價。</li>
            <li>用地圖介面提供房屋周遭環境資訊，例如交通、醫療設施，以及商業設施，讓使用者能夠更直覺的評估房屋地點周遭環境。</li>
        </ul>
    </div>
</div>